import{j as e,ai as v,az as b,ay as j,aC as g,r as x,y,aB as l,D as p,F as C,h as f,p as S}from"./index-BFN8OuE8.js";import{s as w,c as F}from"./config-CIBk6lT9.js";import{C as N,a as k}from"./CRow-CJuqxcNC.js";import{C as I,a as B}from"./CCardBody-wuuvjtKP.js";import{C as R}from"./CCardHeader-CJsmVxQF.js";import{C as t}from"./CFormSelect-CCEVQD5-.js";const z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",bgcolor:"background.paper",borderRadius:"12px",boxShadow:24,p:4,display:"flex",flexDirection:"column",alignItems:"center"};function E({imageUrl:a,open:m,handleClose:i}){console.log(a);const h=()=>{g("/programming/downloady",{path:a.path}).then(s=>{if(!s||!s.data)throw new Error("Failed to fetch the image");const u=s.data.body,d=atob(u.split(",")[1]),c=new Uint8Array(d.length);for(let o=0;o<d.length;o++)c[o]=d.charCodeAt(o);const n=new Blob([c],{type:"image/png"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="myImage.png",document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(s=>{console.error("Error downloading image:",s),alert("Failed to download the image. Please try again.")})};return e.jsx(v,{open:m,onClose:i,"aria-labelledby":"modal-title","aria-describedby":"modal-description",sx:{backdropFilter:"blur(8px)"},children:e.jsxs(b,{sx:z,children:[a?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:a.img,alt:"Generated",style:{maxWidth:"100%",maxHeight:"70vh",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",marginBottom:"16px"}}),e.jsx(j,{variant:"contained",color:"primary",onClick:h,children:"تحميل الصورة"})]}):e.jsx("p",{children:"لا توجد صورة للعرض"}),e.jsx(j,{variant:"outlined",color:"secondary",onClick:i,sx:{mt:2},children:"إغلاق"})]})})}const A=()=>{const[a,m]=x.useState({primarySubject:"",background:"",lighting:"",colorPalette:"",mood:"",culture:"",artStyle:"",size:"1024x1024",quality:"standard"}),[i,h]=x.useState(!1),[s,u]=x.useState(""),[d,c]=x.useState(!1),n=o=>{m({...a,[o.target.name]:o.target.value})},r=async()=>{if(!a.primarySubject){alert("يرجى إدخال الموضوع الرئيسي");return}h(!0);try{const o=await g("/programming/ui-gen",a);console.log("before"),o.data.status===200&&(console.log("before 1 "),u(o.data.body),c(!0))}catch(o){console.error("Error:",o),alert("فشل في توليد الصورة")}finally{h(!1)}};return e.jsxs(N,{children:[e.jsx(k,{xs:12,children:e.jsxs(I,{className:"mb-4",children:[e.jsx(R,{children:e.jsx("strong",{children:"مصمم الصور"})}),e.jsx(B,{children:e.jsxs(y,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{children:"الوصف "}),e.jsx(p,{type:"text",placeholder:"مثال: مدينة مستقبلية",name:"primarySubject",value:a.primarySubject,onChange:n})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{children:"الخلفية"}),e.jsx(p,{type:"text",placeholder:"مثال: سماء غائمة، غروب الشمس",name:"background",value:a.background,onChange:n})]}),e.jsxs("div",{className:"mb-3 d-flex gap-2",children:[e.jsxs("div",{children:[e.jsx(l,{children:"الإضاءة"}),e.jsxs(t,{name:"lighting",value:a.lighting,onChange:n,children:[e.jsx("option",{value:"",children:"اختر الإضاءة"}),e.jsx("option",{value:"طبيعية",children:"طبيعية"}),e.jsx("option",{value:"ليلية",children:"ليلية"}),e.jsx("option",{value:"نيونية",children:"نيونية"})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"لوحة الألوان"}),e.jsxs(t,{name:"colorPalette",value:a.colorPalette,onChange:n,children:[e.jsx("option",{value:"",children:"اختر الألوان"}),e.jsx("option",{value:"دافئة",children:"دافئة"}),e.jsx("option",{value:"باردة",children:"باردة"}),e.jsx("option",{value:"كلاسيكية",children:"كلاسيكية"})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{children:"المزاج"}),e.jsxs(t,{name:"mood",value:a.mood,onChange:n,children:[e.jsx("option",{value:"",children:"اختر المزاج"}),e.jsx("option",{value:"هادئ",children:"هادئ"}),e.jsx("option",{value:"غامض",children:"غامض"}),e.jsx("option",{value:"ملهم",children:"ملهم"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{children:"الثقافة / التأثير الفني"}),e.jsxs(t,{name:"culture",value:a.culture,onChange:n,children:[e.jsx("option",{value:"",children:"اختر الثقافة"}),e.jsx("option",{value:"عربي",children:"عربي"}),e.jsx("option",{value:"ياباني",children:"ياباني"}),e.jsx("option",{value:"أوروبي كلاسيكي",children:"أوروبي كلاسيكي"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(l,{children:"النمط الفني"}),e.jsxs(t,{name:"artStyle",value:a.artStyle,onChange:n,children:[e.jsx("option",{value:"",children:"اختر النمط"}),e.jsx("option",{value:"واقعي",children:"واقعي"}),e.jsx("option",{value:"كرتوني",children:"كرتوني"}),e.jsx("option",{value:"لوحة زيتية",children:"لوحة زيتية"})]})]}),e.jsxs("div",{className:"mb-3 d-flex gap-2",children:[e.jsxs("div",{children:[e.jsx(l,{children:"حجم الصورة"}),e.jsxs(t,{name:"size",value:a.size,onChange:n,children:[e.jsx("option",{value:"1024x1024",children:"مربع (1024x1024)"}),e.jsx("option",{value:"1024x1792",children:"طولي (1024x1792)"}),e.jsx("option",{value:"1792x1024",children:"عرضي (1792x1024)"})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"جودة الصورة"}),e.jsxs(t,{name:"quality",value:a.quality,onChange:n,children:[e.jsx("option",{value:"standard",children:"عادية"}),e.jsx("option",{value:"hd",children:"عالية الدقة"})]})]})]}),e.jsxs(C,{color:"primary",onClick:r,disabled:i,children:[i?e.jsx(f,{size:"sm"}):"توليد الصورة",w["youtube-trans"]," ",e.jsx(S,{icon:F,className:"me-2",style:{color:"gold",fontSize:"50px"}})]})]})})]})}),e.jsx(E,{open:d,imageUrl:s,handleClose:()=>c(!1)})]})};export{A as default};
